<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="600" viewBox="0 0 1400 600">
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2563eb"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#059669"/>
    </marker>
    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ea580c"/>
    </marker>
    <filter id="shadow">
      <feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background with gradient -->
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f0f9ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f9fafb;stop-opacity:1" />
    </linearGradient>
  </defs>
  <rect width="1400" height="600" fill="url(#bgGradient)"/>
  
  <!-- Title -->
  <text x="700" y="45" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="28" font-weight="bold" fill="#111827">
    Agency Dashboard Architecture
  </text>
  <text x="700" y="70" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" fill="#6b7280">
    Next.js 16 â€¢ Clerk Auth â€¢ PostgreSQL (Neon) â€¢ Daily View Limits
  </text>
  
  <!-- Section: User & Auth -->
  <g id="user-section">
    <!-- User Browser -->
    <rect x="50" y="120" width="180" height="90" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="3" filter="url(#shadow)"/>
    <text x="140" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#1e40af">ğŸ‘¤ User</text>
    <text x="140" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#3b82f6">Browser</text>
    <text x="140" y="195" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#60a5fa">Sign In/Out</text>
    
    <!-- Clerk Auth -->
    <rect x="280" y="120" width="180" height="90" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" filter="url(#shadow)"/>
    <text x="370" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#92400e">ğŸ” Clerk</text>
    <text x="370" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#d97706">Authentication</text>
    <text x="370" y="195" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#f59e0b">JWT Sessions</text>
  </g>
  
  <!-- Section: Middleware -->
  <g id="middleware-section">
    <rect x="280" y="260" width="180" height="110" rx="10" fill="#ddd6fe" stroke="#8b5cf6" stroke-width="3" filter="url(#shadow)"/>
    <text x="370" y="290" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#5b21b6">ğŸ›¡ï¸ Middleware</text>
    <text x="370" y="312" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#7c3aed">Route Protection</text>
    <text x="370" y="333" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#8b5cf6">/dashboard</text>
    <text x="370" y="350" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#8b5cf6">/agencies</text>
    <text x="370" y="367" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#8b5cf6">/contacts</text>
  </g>
  
  <!-- Section: Application -->
  <g id="app-section">
    <!-- Next.js Pages -->
    <rect x="520" y="120" width="200" height="110" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="3" filter="url(#shadow)"/>
    <text x="620" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#065f46">âš¡ Next.js</text>
    <text x="620" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#059669">App Router (SSR)</text>
    <text x="620" y="192" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#10b981">â€¢ Dashboard</text>
    <text x="620" y="207" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#10b981">â€¢ Agencies Table</text>
    <text x="620" y="222" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#10b981">â€¢ Contacts + Limits</text>
  </g>
  
  <!-- Section: Data Layer -->
  <g id="data-section">
    <!-- Prisma ORM -->
    <rect x="770" y="120" width="200" height="110" rx="10" fill="#e0e7ff" stroke="#6366f1" stroke-width="3" filter="url(#shadow)"/>
    <text x="870" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#3730a3">ğŸ”· Prisma ORM</text>
    <text x="870" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#4f46e5">Type-Safe Queries</text>
    <text x="870" y="192" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6366f1">Agency</text>
    <text x="870" y="207" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6366f1">Contact</text>
    <text x="870" y="222" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6366f1">UserContactView</text>
    
    <!-- PostgreSQL Database -->
    <rect x="1040" y="120" width="200" height="110" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="3" filter="url(#shadow)"/>
    <text x="1140" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#9f1239">ğŸ—„ï¸ PostgreSQL</text>
    <text x="1140" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#db2777">Neon Database</text>
    <text x="1140" y="192" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#ec4899">922 Agencies</text>
    <text x="1140" y="207" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#ec4899">1000 Contacts</text>
    <text x="1140" y="222" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#f9a8d4">Serverless</text>
  
  
  <!-- Section: Supporting Systems -->
  <g id="support-section">
    <!-- CSV Seed (Initial Data) -->
    <rect x="170" y="430" width="220" height="100" rx="10" fill="#fed7aa" stroke="#ea580c" stroke-width="3" filter="url(#shadow)"/>
    <text x="280" y="460" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#7c2d12">ğŸ“‚ CSV Import</text>
    <text x="280" y="482" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#9a3412">agencies_rows.csv</text>
    <text x="280" y="500" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#9a3412">contacts_rows.csv</text>
    <text x="280" y="518" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#ea580c">scripts/seed.js â†’ Prisma</text>
    
    <!-- Daily Limit Logic -->
    <rect x="450" y="430" width="220" height="100" rx="10" fill="#fecaca" stroke="#dc2626" stroke-width="3" filter="url(#shadow)"/>
    <text x="560" y="460" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#7f1d1d">ğŸš¦ Daily Limits</text>
    <text x="560" y="482" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#991b1b">50 views/day/user</text>
    <text x="560" y="500" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#b91c1c">Each contact row = 1</text>
    <text x="560" y="518" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#dc2626">UserContactView tracks</text>
    
    <!-- Components -->
    <rect x="730" y="430" width="220" height="100" rx="10" fill="#e0e7ff" stroke="#818cf8" stroke-width="3" filter="url(#shadow)"/>
    <text x="840" y="460" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#3730a3">ğŸ¨ UI Components</text>
    <text x="840" y="482" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#4f46e5">Navigation + UserButton</text>
    <text x="840" y="500" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#4f46e5">UpgradePrompt</text>
    <text x="840" y="518" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#818cf8">Pagination Tables</text>
  </g>
  
  <!-- Numbered Flow Arrows -->
  <!-- 1. User to Clerk -->
  <line x1="230" y1="165" x2="280" y2="165" stroke="#2563eb" stroke-width="3" marker-end="url(#arrowblue)"/>
  <circle cx="245" cy="165" r="12" fill="#2563eb"/>
  <text x="245" y="170" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#ffffff">1</text>
  <text x="255" y="150" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#1e40af">Login</text>
  
  <!-- 2. Clerk to Middleware -->
  <line x1="370" y1="210" x2="370" y2="260" stroke="#2563eb" stroke-width="3" marker-end="url(#arrowblue)"/>
  <circle cx="370" cy="230" r="12" fill="#2563eb"/>
  <text x="370" y="235" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#ffffff">2</text>
  <text x="395" y="235" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#1e40af">JWT</text>
  
  <!-- 3. Middleware to Pages -->
  <line x1="460" y1="315" x2="520" y2="175" stroke="#2563eb" stroke-width="3" marker-end="url(#arrowblue)"/>
  <circle cx="485" cy="250" r="12" fill="#2563eb"/>
  <text x="485" y="255" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#ffffff">3</text>
  <text x="475" y="240" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#1e40af">Protect</text>
  
  <!-- 4. Pages to Prisma -->
  <line x1="720" y1="175" x2="770" y2="175" stroke="#059669" stroke-width="3" marker-end="url(#arrowgreen)"/>
  <circle cx="740" cy="175" r="12" fill="#059669"/>
  <text x="740" y="180" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#ffffff">4</text>
  <text x="745" y="165" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#065f46">Query</text>
  
  <!-- 5. Prisma to PostgreSQL -->
  <line x1="970" y1="175" x2="1040" y2="175" stroke="#059669" stroke-width="3" marker-end="url(#arrowgreen)"/>
  <circle cx="1000" cy="175" r="12" fill="#059669"/>
  <text x="1000" y="180" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#ffffff">5</text>
  <text x="1005" y="165" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#065f46">SQL</text>
  
  <!-- Seed arrow (dashed) -->
  <line x1="390" y1="480" x2="870" y2="230" stroke="#ea580c" stroke-width="2.5" marker-end="url(#arroworange)" stroke-dasharray="8,4"/>
  <text x="620" y="350" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#ea580c">One-time Seed</text>
  
  <!-- Limit enforcement (dashed) -->
  <line x1="620" y1="430" x2="620" y2="230" stroke="#dc2626" stroke-width="2.5" stroke-dasharray="8,4"/>
  <text x="630" y="330" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#dc2626">Enforces</text>
  
  <!-- Legend -->
  <rect x="50" y="550" width="1300" height="35" rx="6" fill="#ffffff" stroke="#d1d5db" stroke-width="2" opacity="0.95"/>
  <text x="65" y="572" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#111827">Flow:</text>
  
  <circle cx="140" cy="568" r="10" fill="#2563eb"/>
  <text x="140" y="572" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="bold" fill="#fff">1-3</text>
  <text x="158" y="572" font-family="system-ui, sans-serif" font-size="11" fill="#374151">User Auth & Protection</text>
  
  <circle cx="340" cy="568" r="10" fill="#059669"/>
  <text x="340" y="572" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="bold" fill="#fff">4-5</text>
  <text x="358" y="572" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Data Queries</text>
  
  <line x1="500" y1="568" x2="540" y2="568" stroke="#ea580c" stroke-width="2.5" stroke-dasharray="6,3"/>
  <text x="550" y="572" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Initial Seed</text>
  
  <line x1="680" y1="568" x2="720" y2="568" stroke="#dc2626" stroke-width="2.5" stroke-dasharray="6,3"/>
  <text x="730" y="572" font-family="system-ui, sans-serif" font-size="11" fill="#374151">Business Logic</text>
  
  <text x="880" y="572" font-family="system-ui, sans-serif" font-size="11" fill="#6b7280" font-style="italic">Built with Next.js 16 + Clerk + Neon PostgreSQL</text>
</svg>
