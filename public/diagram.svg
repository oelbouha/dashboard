<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2563eb"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#059669"/>
    </marker>
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="700" fill="#f9fafb"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#111827">
    Agency Dashboard System Architecture
  </text>
  
  <!-- User/Browser -->
  <rect x="50" y="100" width="200" height="100" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
  <text x="150" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1e40af">User Browser</text>
  <text x="150" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#1e40af">Web Client</text>
  <text x="150" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#3b82f6">Sign In/Out</text>
  
  <!-- Clerk Auth -->
  <rect x="350" y="100" width="200" height="100" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#92400e">Clerk Auth</text>
  <text x="450" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#92400e">Authentication</text>
  <text x="450" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d97706">JWT/Sessions</text>
  
  <!-- Next.js Middleware -->
  <rect x="350" y="250" width="200" height="120" rx="8" fill="#ddd6fe" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#5b21b6">Next.js Middleware</text>
  <text x="450" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#5b21b6">Route Protection</text>
  <text x="450" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7c3aed">/dashboard</text>
  <text x="450" y="348" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7c3aed">/agencies</text>
  <text x="450" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7c3aed">/contacts</text>
  
  <!-- Next.js Pages -->
  <rect x="650" y="100" width="220" height="120" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
  <text x="760" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#065f46">Next.js Pages</text>
  <text x="760" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#065f46">App Router</text>
  <text x="760" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#059669">Dashboard UI</text>
  <text x="760" y="198" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#059669">Agencies Table</text>
  <text x="760" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#059669">Contacts Table</text>
  
  <!-- Prisma ORM -->
  <rect x="950" y="100" width="200" height="120" rx="8" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" filter="url(#shadow)"/>
  <text x="1050" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#3730a3">Prisma ORM</text>
  <text x="1050" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#3730a3">Data Layer</text>
  <text x="1050" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#4f46e5">Agency Model</text>
  <text x="1050" y="198" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#4f46e5">Contact Model</text>
  <text x="1050" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#4f46e5">UserContactView</text>
  
  <!-- Database -->
  <rect x="950" y="280" width="200" height="100" rx="8" fill="#fce7f3" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>
  <text x="1050" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#9f1239">SQLite Database</text>
  <text x="1050" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#9f1239">file:./dev.db</text>
  <text x="1050" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#db2777">922 Agencies</text>
  <text x="1050" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#db2777">1000 Contacts</text>
  
  <!-- CSV Data Sources -->
  <rect x="50" y="450" width="250" height="120" rx="8" fill="#fed7aa" stroke="#ea580c" stroke-width="2" filter="url(#shadow)"/>
  <text x="175" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#7c2d12">CSV Data Sources</text>
  <text x="175" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7c2d12">agencies_agency_rows.csv</text>
  <text x="175" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7c2d12">contacts_contact_rows.csv</text>
  <text x="175" y="555" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ea580c">scripts/seed.js</text>
  
  <!-- Daily Limit Logic -->
  <rect x="400" y="450" width="250" height="120" rx="8" fill="#fecaca" stroke="#dc2626" stroke-width="2" filter="url(#shadow)"/>
  <text x="525" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#7f1d1d">Daily Limit Logic</text>
  <text x="525" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#7f1d1d">50 views per day per user</text>
  <text x="525" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#991b1b">Each row = 1 view</text>
  <text x="525" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#dc2626">UserContactView table</text>
  
  <!-- Arrows -->
  <!-- User to Clerk -->
  <line x1="250" y1="150" x2="350" y2="150" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowblue)"/>
  <text x="300" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2563eb">Login</text>
  
  <!-- Clerk to Middleware -->
  <line x1="450" y1="200" x2="450" y2="250" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowblue)"/>
  <text x="470" y="225" font-family="Arial, sans-serif" font-size="10" fill="#2563eb">JWT</text>
  
  <!-- Middleware to Pages -->
  <line x1="550" y1="310" x2="650" y2="160" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowblue)"/>
  <text x="590" y="220" font-family="Arial, sans-serif" font-size="10" fill="#2563eb">Protected</text>
  
  <!-- Pages to Prisma -->
  <line x1="870" y1="160" x2="950" y2="160" stroke="#059669" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="910" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#059669">Query</text>
  
  <!-- Prisma to DB -->
  <line x1="1050" y1="220" x2="1050" y2="280" stroke="#059669" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="1070" y="250" font-family="Arial, sans-serif" font-size="10" fill="#059669">SQL</text>
  
  <!-- CSV to Prisma -->
  <line x1="300" y1="510" x2="950" y2="330" stroke="#ea580c" stroke-width="2" marker-end="url(#arrowblue)" stroke-dasharray="5,5"/>
  <text x="600" y="410" font-family="Arial, sans-serif" font-size="10" fill="#ea580c">Seed Import</text>
  
  <!-- Daily Limit to Pages -->
  <line x1="525" y1="450" x2="760" y2="220" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowblue)" stroke-dasharray="5,5"/>
  <text x="630" y="330" font-family="Arial, sans-serif" font-size="10" fill="#dc2626">Enforces</text>
  
  <!-- Legend -->
  <rect x="50" y="630" width="300" height="50" rx="4" fill="#ffffff" stroke="#d1d5db" stroke-width="1"/>
  <text x="60" y="650" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#111827">Data Flow:</text>
  <line x1="120" y1="647" x2="160" y2="647" stroke="#2563eb" stroke-width="2" marker-end="url(#arrowblue)"/>
  <text x="170" y="650" font-family="Arial, sans-serif" font-size="10" fill="#374151">Request/Auth</text>
  <line x1="250" y1="647" x2="290" y2="647" stroke="#059669" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <text x="300" y="650" font-family="Arial, sans-serif" font-size="10" fill="#374151">Data Query</text>
  
  <line x1="60" y1="667" x2="100" y2="667" stroke="#ea580c" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="110" y="670" font-family="Arial, sans-serif" font-size="10" fill="#374151">One-time Seed</text>
  <line x1="210" y1="667" x2="250" y2="667" stroke="#dc2626" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="260" y="670" font-family="Arial, sans-serif" font-size="10" fill="#374151">Business Logic</text>
</svg>
